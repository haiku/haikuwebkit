<!DOCTYPE html>
<meta charset="utf-8" />
<title>Scroll to Text Fragment - ensure that dynamically inserted content is found</title>
<head>
<script src="/js-test-resources/ui-helper.js"></script>
<script>
if (window.testRunner) {
    testRunner.dumpAsText();
    testRunner.waitUntilDone();
}

async function runTest() {
    location.href = "#:~:text=Scroll%20Point";
    var output = "";

    await UIHelper.ensurePresentationUpdate();

    document.getElementById("destination").innerText = "Scroll Point";

    addEventListener('scroll', () => {
        if (window.pageYOffset > 9000)
            output += "PASS: Page scrolled to text fragment.";
        else 
            output += "FAIL: Page did not scroll to text fragment.";
        output += '<br>';

        var target = document.getElementById('target');
        target.innerHTML = output;
        target.style.paddingTop = "0px";

        if (window.testRunner)
            testRunner.notifyDone();

    });
}

window.addEventListener('load', () => {
    runTest();
});
</script>
</head>

<body>
    <div id="target" style="padding-top: 10000px;">
        <p id="destination"></p>
    </div>
</body>
</html>

