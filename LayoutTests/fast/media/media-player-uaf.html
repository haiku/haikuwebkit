<!-- webkit-test-runner [ dumpJSConsoleLogInStdErr=true ] -->
<script>
  onload = async () => {
    if (window.testRunner)
       testRunner.dumpAsText();
    let video0 = document.createElement('video');
    video0.srcObject = await navigator.mediaDevices.getUserMedia({video: true});
    let textTrack = video0.addTextTrack('subtitles', '');
    textTrack.addCue(new VTTCue(0, 1, 'a'));
    await caches.open('x');
    video0.src = 'data:video/mp4;';
  };
</script>
