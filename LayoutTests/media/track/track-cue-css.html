<!DOCTYPE html>
<html>
    <head>
        <script>var requirePixelDump = true;</script>
        <script src=../media-file.js></script>
        <script src=../video-test.js></script>
        <script>

        function seeked()
        {
            consoleWrite("Finishing test.");
            setTimeout(endTest, 100);
        }
        
        setCaptionDisplayMode('Automatic');
        </script>
    </head>
    <body>
        <video controls>
            <track id="testTrack" src="captions-webvtt/css-styling.vtt" kind="captions" default>
        </video>
        <script>
            function onTrackLoad() {
                consoleWrite("Test that CSS in VTT file is applied correctly.");
                parent.postMessage("webvttParsed");
                findMediaElement();
                video.src = findMediaFile('video', '../content/test');
                waitForEvent('seeked', seeked);
                waitForEvent('canplaythrough', function() { video.currentTime = 0; });
            }

            document.getElementById('testTrack').addEventListener('load', onTrackLoad);
        </script>
    </body>
</html>
